# PIC-Flow Post-Processing Profiles Library

## 1. Purpose of this Directory

This directory contains a library of reusable **Post-Processing Profiles** (`.yml` files). Each file is a "recipe" that tells the `postprocessor` executable what to do with the raw data generated by the solver.

Using these profiles, you can perform complex analysis and generate tailored visualization files without writing any new code.

A post-processing profile controls:
- Which timesteps from a simulation are analyzed (`run_control`).
- The sequence of calculations to perform, like calculating vorticity or averaging data (`processing_pipeline`).
- The content and format of the final output files (`vtk_output`).

## 2. Included Profiles

- **`master_post_template.yml`**: A heavily commented reference file that showcases **all possible** post-processing configuration options. Use this as a guide for creating your own analysis recipes.

*(As you develop standard analysis tasks, you should add profiles here, for example: `Calculate-Forces.yml`, `Generate-Vorticity-Field.yml`, `Track-Particles.yml`.)*

## 3. How to Use

After a simulation has finished, you use the `--post-process` flag in the `run` command to execute an analysis recipe. You must also provide the original `--case` file (so the post-processor knows the physical scaling) and the desired recipe with the `--post` flag.

```bash
# Example: Run the 'Calculate-Vorticity.yml' recipe on a completed simulation
./bin/pic.flow run \
    --case path/to/your/original/case.yml \
    --post post_profiles/Calculate-Vorticity.yml \
    --post-process
```
The script will find the latest run associated with that case file and process its results.

## 4. Creating a New Post-Processing Profile

Create a new profile for any repeatable analysis task.

**Workflow:**
1.  **Start from the master template:** Copy `master_post_template.yml` to a new file with a descriptive name (e.g., `Extract-Centerline-Profile.yml`).
2.  **Edit the recipe:**
    -   In the `run_control` section, specify which `time_steps` you want to analyze.
    -   In the `processing_pipeline` section, define the sequence of operations.
    -   In the `vtk_output` section, list the final `output_fields` you want to save for visualization in ParaView.
3.  **Save and use:** Your new analysis recipe is now part of your library and can be run on any compatible simulation data.